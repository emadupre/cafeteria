<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Men√∫ de Bebidas y Sabores</title>
    <link rel="stylesheet" href="pedidos.css">
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap"
      rel="stylesheet"
    />
</head>
<body>
    <div class="container">
        <div class="order-panel">
            <div class="armar-pedido">
                <h1 class="order-title">Arm√° tu pedido!</h1>
            </div>
            <h3>ORDEN:</h3>
            <div id="orderList"></div>
            <div class="total"><h4>Total: $<span id="totalAmount">0</span></h4></div>
        </div>
        
        <script>
            // Agregar esto al inicio del script existente
            document.addEventListener('DOMContentLoaded', function() {
                const customerName = localStorage.getItem('customerName');
                if (customerName) {
                    document.getElementById('displayCustomerName').textContent = customerName;
                }
            });
        </script>

        <div class="main-content">
            <div class="welcome">
                <h2>Bienvenido/a <span id="displayCustomerName"></span>!</h2>
                <h2>Bebidas</h2>
            </div>

            <div class="drinks-grid">
                <div class="drink-item" onclick="addToOrder('Descafeinado', 500)">
                    <div class="drink-icon">‚òï</div>
                    <div>Descafeinado</div>
                    <div class="drink-price">$500</div>
                </div>
                <div class="drink-item" onclick="addToOrder('Caf√© negro', 600)">
                    <div class="drink-icon">‚òï</div>
                    <div>Caf√© negro</div>
                    <div class="drink-price">$600</div>
                </div>
                <div class="drink-item" onclick="addToOrder('T√©', 200)">
                    <div class="drink-icon">ü´ñ</div>
                    <div>T√©</div>
                    <div class="drink-price">$200</div>
                </div>
                <div class="drink-item" onclick="addToOrder('Milkshake', 1000)">
                    <div class="drink-icon">ü•§</div>
                    <div>Milkshake</div>
                    <div class="drink-price">$1000</div>
                </div>
            </div>

            <div class="buttons">
                <button class="btn-cancel" onclick="cancelOrder()">Cancelar</button>
                <button class="btn-confirm" onclick="confirmOrder()">Confirmar</button>
            </div>
        </div>

        

        <!-- Modal para sabores de Milkshake -->
        <div id="milkshakeModal" class="modal">
            <div class="modal-content">
                <h2>Elija un sabor de Milkshake</h2>
                <div class="flavors-grid">
                    <div class="flavor-item" onclick="selectFlavor('Milkshake', 'Frutilla')">
                        <div class="flavor-icon">üçì</div>
                        <div>Frutilla</div>
                    </div>
                    <div class="flavor-item" onclick="selectFlavor('Milkshake', 'Chocolate')">
                        <div class="flavor-icon">üç´</div>
                        <div>Chocolate</div>
                    </div>
                    <div class="flavor-item" onclick="selectFlavor('Milkshake', 'Banana')">
                        <div class="flavor-icon">üçå</div>
                        <div>Banana</div>
                    </div>
                    <div class="flavor-item out-of-stock">
                        <div class="flavor-icon">üç™</div>
                        <div>Oreo</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal para sabores de T√© -->
        <div id="teaModal" class="modal">
            <div class="modal-content">
                <h2>Elija un sabor de T√©</h2>
                <div class="flavors-grid">
                    <div class="flavor-item" onclick="selectFlavor('T√©', 'Negro')">
                        <div class="flavor-icon">ü´ñ</div>
                        <div>Negro</div>
                    </div>
                    <div class="flavor-item" onclick="selectFlavor('T√©', 'Verde')">
                        <div class="flavor-icon">üçÉ</div>
                        <div>Verde</div>
                    </div>
                    <div class="flavor-item" onclick="selectFlavor('T√©', 'Manzanilla')">
                        <div class="flavor-icon">üåº</div>
                        <div>Manzanilla</div>
                    </div>
                    <div class="flavor-item" onclick="selectFlavor('T√©', 'Frutos Rojos')">
                        <div class="flavor-icon">ü´ê</div>
                        <div>Frutos Rojos</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let order = {};
        let total = 0;
        let currentDrink = '';
        let currentPrice = 0;

        function addToOrder(item, price) {
            if (item === 'Milkshake' || item === 'T√©') {
                currentDrink = item;
                currentPrice = price;
                const modalId = item === 'Milkshake' ? 'milkshakeModal' : 'teaModal';
                document.getElementById(modalId).style.display = 'block';
            } else {
                if (order[item]) {
                    order[item].quantity++;
                } else {
                    order[item] = {
                        price: price,
                        quantity: 1
                    };
                }
                updateOrderDisplay();
            }
        }

        function selectFlavor(drink, flavor) {
            const itemName = `${drink} - ${flavor}`;
            if (order[itemName]) {
                order[itemName].quantity++;
            } else {
                order[itemName] = {
                    price: currentPrice,
                    quantity: 1
                };
            }
            document.getElementById('milkshakeModal').style.display = 'none';
            document.getElementById('teaModal').style.display = 'none';
            updateOrderDisplay();
        }

        function removeItem(item) {
            delete order[item];
            updateOrderDisplay();
        }

        function updateOrderDisplay() {
            const orderList = document.getElementById('orderList');
            orderList.innerHTML = '';
            total = 0;

            for (const [item, details] of Object.entries(order)) {
                const itemTotal = details.price * details.quantity;
                total += itemTotal;
                
                const itemElement = document.createElement('div');
                itemElement.className = 'order-item';
                
                const itemText = document.createElement('span');
                itemText.textContent = `${item} x${details.quantity} - $${itemTotal}`;
                
                const deleteButton = document.createElement('span');
                deleteButton.className = 'delete-item';
                deleteButton.textContent = '√ó';
                deleteButton.onclick = () => removeItem(item);
                
                itemElement.appendChild(itemText);
                itemElement.appendChild(deleteButton);
                orderList.appendChild(itemElement);
            }

            document.getElementById('totalAmount').textContent = total;
        }

        window.onclick = function(event) {
            const milkshakeModal = document.getElementById('milkshakeModal');
            const teaModal = document.getElementById('teaModal');
            if (event.target === milkshakeModal) {
                milkshakeModal.style.display = 'none';
            }
            if (event.target === teaModal) {
                teaModal.style.display = 'none';
            }
        }

        function cancelOrder() {
            order = {};
            total = 0;
            updateOrderDisplay();
        }

        function confirmOrder() {
            if (total > 0) {
                // Guardar el pedido en el localStorage
                localStorage.setItem('orderDetails', JSON.stringify(order));
                localStorage.setItem('totalAmount', total.toString());

                // Redirigir a la p√°gina "confirmar-pedido.html"
                window.location.href = 'confirmar-pedido.html';
            } else {
                alert('Por favor, agregue items a su pedido');
            }
        }
    </script>
</body>
</html>